---
title: "Untitled"
output: html_document
---

packages 

```{r}
library(pacman)
p_load(tidyverse, parallel, brms)
ncores = detectCores()
setwd("C:/Users/95/Dropbox/MastersSem1/DecisionMaking/examCode")
```

read simulated data 

```{r}

df <- read_csv("sample_data.csv") %>%
  select(-c(delta, gamma))

```

set priors 

```{r}

prior1 <- prior(normal(0.5, 0.5), nlpar = "gamma") +
  prior(normal(0.5, 0.5), nlpar = "delta")

```

define model:
1. is the formula correct?
2. are the priors right?

# this takes a long time.. 

```{r}

randomMod <- brm(bf(w ~ (delta * (p ** gamma)) / 
                      (delta * (p **gamma) + (1-p)**gamma), 
               gamma ~ 1 + items + (items|ID),
               delta ~ 1 + items + (items|ID),
               nl = TRUE),
            data = df, prior = prior1,
            iter = 500,
            cores = ncores,
            file = "itemSlope") 

```


